<?xml version="1.0" encoding="UTF-8" ?>

	<!--
		* JBoss, Home of Professional Open Source. * See the COPYRIGHT.txt
		file distributed with this work for information * regarding copyright
		ownership. Some portions may be licensed * to Red Hat, Inc. under one
		or more contributor license agreements. * * This library is free
		software; you can redistribute it and/or * modify it under the terms
		of the GNU Lesser General Public * License as published by the Free
		Software Foundation; either * version 2.1 of the License, or (at your
		option) any later version. * * This library is distributed in the hope
		that it will be useful, * but WITHOUT ANY WARRANTY; without even the
		implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR
		PURPOSE. See the GNU * Lesser General Public License for more details.
		* * You should have received a copy of the GNU Lesser General Public *
		License along with this library; if not, write to the Free Software *
		Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA *
		02110-1301 USA. */
	-->

<plugin name="TeiidPlugin" displayName="Teiid Plugin" package="org.teiid.rhq.plugin"
	version="2.0.0" description="Supports management and monitoring of JBoss Teiid"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:xmlns:rhq-plugin"
	xmlns:c="urn:xmlns:rhq-configuration">

	<depends plugin="JMX" />
	<depends plugin="JBossAS5" useClasses="true" />

	<server name="Data Services" description="JBoss Enterprise Data Services"
		class="PlatformComponent" discovery="PlatformDiscoveryComponent">

		<runs-inside>
			<parent-resource-type name="JBossAS Server"
				plugin="JBossAS5" />
		</runs-inside>

	<!--	<metric displayName="Query Count" defaultOn="true" displayType="summary"
			category="throughput" property="queryCount"
			description="The number of queries for a given point in time" />

		<metric displayName="Long Running Queries" defaultOn="true"
			displayType="summary" category="performance" property="longRunningQueries"
			description="The number of queries that have been running longer than the limit set for queries." />

		<metric displayName="Session Count" defaultOn="true"
			displayType="summary" category="throughput" property="sessionCount"
			description="The number of user connections for a given point in time" />

		<resource-configuration>
			<c:group name="general" displayName="General"
				hiddenByDefault="false">
				<c:description>Query Configuration</c:description>
				<c:simple-property name="longRunningQueryLimit"
					type="integer" activationPolicy="immediate" units="seconds"
					default="600" displayName="Long Running Query limit"
					description="The value (in seconds) to use to determine if a query is to be considered 'long running'.">
					<c:constraint>
						<c:integer-constraint minimum="0" maximum="999999" />
					</c:constraint>
				</c:simple-property>
			</c:group>
		</resource-configuration>
       -->
		<service name="Virtual Database (VDB)s"
			description="JBoss Enterprise Data Services Virtual Databases" class="VDBComponent"
			discovery="VDBDiscoveryComponent" createDeletePolicy="both"
			creationDataType="content">

			<content name="vdb" displayName="VDB Archive" category="deployable"
				isCreationType="true">

			</content>


			<resource-configuration>
				<c:group name="general" displayName="General"
					hiddenByDefault="false">
					<c:simple-property name="name" type="string"
						description="The Virtual Database Name" />
					<c:simple-property name="version" type="string"
						description="The Virtual Database Version" />
					<c:simple-property name="description" type="string"
						description="The Virtual Database Description" />
					<c:simple-property name="status" type="string"
						description="The Virtual Database Status" />
					<c:simple-property name="url" type="string"
						description="The Virtual Database URL" />
				</c:group>
				<c:group name="models" displayName="Models" hiddenByDefault="false">
					<c:list-property name="models" description="The models for this VDB.">
						<c:map-property name="model">
							<c:simple-property name="name" displayName="Name"
								description="Name of the model" required="true" />
							<c:simple-property name="type" displayName="Type"
								description="Type of model" required="true" />
							<c:simple-property name="path" displayName="Path"
								description="Path to the model" required="false" />
							<c:simple-property name="visibility"
								displayName="Visible" description="Visbility of the model"
								required="false" />
						</c:map-property>
					</c:list-property>
				</c:group>
			</resource-configuration>


			<service name="Models" description="Models that map to a datasource"
				class="ModelComponent" discovery="ModelDiscoveryComponent"
				createDeletePolicy="both">
				<resource-configuration>
					<c:group name="general" displayName="General"
						hiddenByDefault="false">
						<c:simple-property name="name" type="string"
							description="The model name" readOnly="true" />
						<c:simple-property name="type" type="string"
							description="The model type. e.g. Source or Virtual" readOnly="true" />
						<c:simple-property name="path" type="string"
							description="The model path" readOnly="true" />
						<c:simple-property name="modelURI" type="string"
							description="The model URI" readOnly="true" />
						<c:simple-property name="source" type="string"
							description="True if this is a physical source model" readOnly="true" />
						<c:simple-property name="visible" type="string"
							description="True if the model is visible" readOnly="true" />
						<c:simple-property name="modelType" type="string"
							description="Type for this model" readOnly="true" />
						<c:simple-property name="supportsMultiSourceBindings"
							type="string" description="True if this models supports multiple source bindings"
							readOnly="true" />
					</c:group>
					<c:group name="connectors" displayName="Connectors"
						hiddenByDefault="false">
						<c:list-property name="connectors"
							description="The connector(s) for this Model">
							<c:map-property name="connector">
								<c:simple-property name="name" displayName="Name"
									description="Connector for this model" required="true" />
							</c:map-property>
						</c:list-property>
					</c:group>
				</resource-configuration>

			</service>

		</service>

	</server>

</plugin>