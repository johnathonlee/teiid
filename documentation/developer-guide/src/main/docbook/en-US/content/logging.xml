<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % CustomDTD SYSTEM "../../../../../../docbook/custom.dtd">
%CustomDTD;
]>
<chapter id="logging">
	<title>Logging</title>
	<section id="custom_logging">
		<title>Customized Logging</title>
		<para>
		The Teiid system provides a wealth of information using logging. To control logging level, 
        contexts, and log locations, you should be familiar with log4j and the container's 
        <filename>jboss-log4j.xml</filename> configuration file.  Teiid also provides a 
        <filename><replaceable>PROFILE</replaceable>/conf/jboss-teiid-log4j.xml</filename> containing 
        much of information from this chapter.  Refer to the Administrator Guide for more details about 
        different Teiid contexts available.  Refer to <ulink url="http://logging.apache.org/log4j/"/> 
        for more information about log4j.
		</para>
		
        <para>
			If the default log4j logging mechanisms are not sufficient for your
			logging needs you may need a different appender, refer to the log4j javadocs at
			<ulink url="http://logging.apache.org/log4j/1.2/apidocs/index.html"/>.   
            Note that log4j already provides quite a few appenders including JMS, RDBMS, and SMTP.
		</para>
		<para>If you want a custom appender, follow the Log4J directions to write a custom appender. Refer to 
		the instructions at <ulink url="http://logging.apache.org/log4net/release/faq.html"/>. If you develop a custom 
            logging solution, the implementation jar should be placed in the "lib" directory of the JBoss AS server profile
			Teiid is installed in.
    	</para>
        
        <section>
            <title>Command Logging API</title>
            <para>
                If you want to build a custom appender for command logging that will have access to 
                log4j "LoggingEvents" to the "COMMAND_LOG" context, it will have a message that is an instance of
                <code>org.teiid.logging.CommandLogMessage</code> defined in the <code>teiid-api-&versionNumber;.jar</code> 
                use these class in your development. The CommmdLogMessage include information about vdb, session, command-sql etc.
            </para>
        </section>
        
        <section id="audit_logging">
            <title>Audit Logging API</title>
            <para>If you want to build a custom appender for command logging that will have access to 
                log4j "LoggingEvents" to the "AUDIT_LOG" context, it will have a message that is an instance of
                <code>org.teiid.logging.AuditMessage</code> defined in the <code>teiid-api-&versionNumber;.jar</code> 
                use this class in your development. AuditMessage include  information about user, the action, and the
                target(s) of the action.</para>                            
        </section>
	</section>
</chapter>