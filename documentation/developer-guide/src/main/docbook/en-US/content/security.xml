<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % CustomDTD SYSTEM "../../../../../../docbook/custom.dtd">
%CustomDTD;
]>
<chapter>
<title>Custom Security</title>
<section id="custom_login_modules">
    <title>Login Modules</title>
    <para>The Teiid system provides a range of built-in and extensible security features to enable the
        secure access of data. Â For details about how to configure the available security features check out
        Admin Guide.</para>
        <para>
            LoginModules are an essential part of the JAAS security
            framework and provide Teiid customizable user authentication and the
            ability to reuse existing LoginModules defined for JBossAS. Refer to 
            the JBoss Application Server security documentation for information about 
            configuring security in JBoss Application Server,  
            <ulink url="http://docs.jboss.org/jbossas/admindevel326/html/ch8.chapter.html"/>.
            </para>
    
		<section>
			<title>Built-in LoginModules</title>
			<para>
			JBoss Application Server provides several LoginModules for common 
			authentication needs, such as authenticating from text files or LDAP. 
         </para>

         <para>
         Below are are some of those available in JBoss Application Server:
         </para>
         
         <variablelist>

            <varlistentry>
               <term>UserRoles LoginModule</term>
               <listitem>
                  <para>
                  Login module that uses simple file based authentication. 
                  </para>
                  <para>
                  Refer to <ulink url="http://community.jboss.org/docs/DOC-12510"/>.
                  </para>
               </listitem>
               </varlistentry>
               <varlistentry>
                  <term>LDAP LoginModule</term>
               <listitem>
                  <para>
                  Login module that uses LDAP based authentication.
                  </para>
                  <para>
                  Refer to <ulink url="http://community.jboss.org/docs/DOC-11253"/>.  
                  </para>
               </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Database LoginModule</term>
               <listitem>
                  <para>
                  Login module that uses Database-based authentication.
                  </para>
                  <para>
                  Refer to <ulink url="http://community.jboss.org/docs/DOC-9511"/>.
                  </para>
               </listitem>
               </varlistentry>
               <varlistentry>
                  <term>Cert LoginModule</term>
               <listitem>
                  <para>
                  Login module that uses X509 certificate based authentication. 
                  </para>
                  <para>
                  See <ulink url="http://community.jboss.org/docs/DOC-9160"/>.
                  </para>
               </listitem>
            </varlistentry>
         
         </variablelist>

         <para>
         For all the available login modules refer to <ulink url="http://community.jboss.org/docs/DOC-11287"/>.
         </para>

      </section>
		
		<section>
			<title>Custom LoginModules</title>
			<para>
				If your authentication needs go beyond the provided LoginModules, please refer 
				to the JAAS development guide at 
				<ulink url="http://java.sun.com/j2se/1.5.0/docs/guide/security/jaas/JAASLMDevGuide.html"/>.
				There are also numerous guides available.
			</para>
            
            <para>If you are extending one of the built-in LoginModules, refer to  
            <ulink url="http://community.jboss.org/docs/DOC-9466"/>.</para>
		</section>
</section>
<section>
	<title>Custom Authorization</title>
	<para>In situations where Teiid's built-in role mechanism is not sufficient, a custom 
	<code>org.teiid.PolicyDecider</code> can be installed via the &jboss-beans; configuration file under the "AuthorizationValidator" bean.
	<example>
		<title>Example Configuration Snippet</title>
		<programlisting role="XML" language="XML"><![CDATA[
	<bean name="AuthorizationValidator" class="org.teiid.dqp.internal.process.DefaultAuthorizationValidator">
        <property name="enabled">true</property>
        <property name="policyDecider"><inject bean="PolicyDecider"/></property>
    </bean>
   
    <bean name="PolicyDecider" class="com.company.CustomPolicyDecider">
        <property name="someProperty">some value</property>
    </bean>]]>
		</programlisting>
	</example>  
	Your custom <code>PolicyDecider</code> should be installed in a jar that is made available to the same classloader as Teiid, typically the profile lib directory.  
	A <code>PolicyDecider</code> may be consulted many times for a single user command, but it is only called to make decisions based upon resources that 
	appear in user queries.  Any further access of resources through views or stored procedures, just as with data roles, is not checked against a <code>PolicyDecider.</code>
	</para>
</section>
</chapter>