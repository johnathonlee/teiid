<!--This script builds a JAR for a Federate Embedded Server Installation -->
<assembly>
  
  <id>embedded-dependencies</id>
  
  <formats>
    <format>dir</format>
  </formats>
  
  <includeBaseDirectory>false</includeBaseDirectory>
  <baseDirectory>federate-embedded</baseDirectory>
    
  <moduleSets>
    <moduleSet>
        <includeSubModules>true</includeSubModules>
               
        <includes>
            <include>org.jboss.federate:federate-cache-jbosscache</include>
            <include>org.jboss.federate:federate-client</include>
            <include>org.jboss.federate:federate-client-jdbc</include>	
            <include>org.jboss.federate:federate-common-core</include>	
            <include>org.jboss.federate:federate-common-internal</include>
    	
        	<include>org.jboss.federate:federate-connector-api</include>
        	<include>org.jboss.federate:federate-connector-metadata</include>
            <include>org.jboss.federate:federate-embedded</include>
        	<include>org.jboss.federate:federate-engine</include>
        	<include>org.jboss.federate:federate-metadata</include>
        	<include>org.jboss.federate:federate-txn-jbossts</include>        	
        </includes>
        
        <binaries>        
          <includeDependencies>true</includeDependencies>
          <unpack>true</unpack>
                                    
          <dependencySets>
            <dependencySet>
              <useProjectArtifact>false</useProjectArtifact>
              <unpack>false</unpack>
              <useTransitiveDependencies>false</useTransitiveDependencies>
              <useDefaultExcludes>true</useDefaultExcludes>
              <excludes>
                <exclude>federate*</exclude>
                
                <!-- these should have been excluded by module dependency structure, but until we fix those this will help-->
                <exclude>antlr*</exclude>
                <exclude>bsh*</exclude>
                <exclude>jgroups*</exclude>
                <exclude>netty*</exclude>
                <exclude>stringtemplate*</exclude>
              </excludes>              
            </dependencySet>
          </dependencySets>
          
        </binaries>
      
    </moduleSet>
  </moduleSets>
    
</assembly>